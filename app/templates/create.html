{% extends "defaultFormat.html" %}
{% block content %}
<div id="postCreate" class="board col-10 col-m-8 col-lg-6">
    <h1>Post Creation:</h1>

    <hr class="col-sm-9">

    <form id="newPoll" class="inputFields col-sm-10" method="post" action="/create">
        {{form.hidden_tag()}}
        
        <div id = "promptContainer">
            {{form.prompt.label(class = "inputLabel")}}
            {{form.prompt(class = "inputBox col-sm-12", placeholder = "Enter your prompt here:")}}
        </div>
        
        <div id = "choices">
            <div class = "col-sm-5">
                {{form.option1.label(class = "inputLabel")}}
                {{form.option1(class = "inputBox col-sm-12", placeholder = "Enter option here:")}}
            </div>
            <div class = "col-sm-5">
                {{form.option2.label(class = "inputLabel")}}
                {{form.option2(class = "inputBox col-sm-12", placeholder = "Enter option here:")}}
            </div>
        </div>
        
        <div id = "barBox" class = "col-12">
            <div class = "bolt" id = "bolt1"><div class = "boltgap"></div></div>
            <div class = "bolt" id = "bolt2"><div class = "boltgap"></div></div>
            <div class = "bolt" id = "bolt3"><div class = "boltgap"></div></div>
            <div class = "bolt" id = "bolt4"><div class = "boltgap"></div></div>

            <div id = "lightray1" class = "lightray"></div>
            <div id = "lightray2" class = "lightray"></div>
            
            <div id = "barContainer" class = "col-11">
                <div class = " bar col-12">
                    <div id = "left"><div class = "highlight"></div><div class = "shadow"></div></div>
                    <div id = "right"><div class = "highlight"></div><div class = "shadow"></div></div>
                </div>
                <div id = "divider"></div>
            </div>
        </div>

        <div id="tagsContainer" class="col-sm-10">
            <h2>Select up to 3 tags:</h2>
            <div class="tags">
                <button type="button" class="tag-button" data-tag="Food">Food</button>
                <button type="button" class="tag-button" data-tag="Sports">Sports</button>
                <button type="button" class="tag-button" data-tag="Fashion">Fashion</button>
                <button type="button" class="tag-button" data-tag="Subject">Subject</button>
                <button type="button" class="tag-button" data-tag="Video Games">Video Games</button>
                <button type="button" class="tag-button" data-tag="Anime">Anime</button>
                <button type="button" class="tag-button" data-tag="Board Games">Board Games</button>
                <button type="button" class="tag-button" data-tag="Animals">Animals</button>
                <button type="button" class="tag-button" data-tag="People">People</button>
                <button type="button" class="tag-button" data-tag="Places">Places</button>
                <button type="button" class="tag-button" data-tag="Film">Film</button>
                <button type="button" class="tag-button" data-tag="TV">TV</button>
                <button type="button" class="tag-button" data-tag="Novels">Novels</button>
                <button type="button" class="tag-button" data-tag="Abilities">Abilities</button>
                <button type="button" class="tag-button" data-tag="Historical">Historical</button>
            </div>
            
            {{ form.tags(id='tags', style="display: none;") }}
            
        </div>
        
        {{form.submit(class = "btn btn-primary col-9")}}
    </form>   
</div>

<script>
    var selectedTags = [];

    function updateTagsField() {
        document.querySelector('#tags').value = selectedTags.join(',');
    }

    document.querySelectorAll('.tag-button').forEach(item => {
        item.style.backgroundColor = 'rgb(0, 123, 255, 0.5)';
        item.addEventListener('click', event => {
            if (selectedTags.includes(item.dataset.tag)) {
                selectedTags = selectedTags.filter(tag => tag !== item.dataset.tag);
                item.classList.remove('selected');
                item.style.backgroundColor = 'rgb(0, 123, 255, 0.5)';
            } else {
                if (selectedTags.length < 3) {
                    selectedTags.push(item.dataset.tag);
                    item.classList.add('selected');
                    item.style.backgroundColor = 'rgb(200, 0, 0)';
                }
            }
            updateTagsField();
        });
    });


</script>
{% endblock %}